(()=>{"use strict";let e=[];var t=new Date;let n=document.getElementById("addTaskButton");n.style.display="none";let r=document.querySelector(".taskBoard"),i=document.querySelector(".taskBoardTitle"),l=!1,a=0,d=i.innerText,c=!1,o=[];function s(t){let i=document.createElement("div");i.setAttribute("class","task");let l=document.createElement("p");l.setAttribute("class","taskTitleDOM"),l.innerText=t.title;let a=document.createElement("p");a.setAttribute("class","taskDueDateDOM"),a.innerText=t.date;let d=document.createElement("p");d.setAttribute("class","desCriptionDOM"),d.innerText=t.description;let c=document.createElement("div");c.setAttribute("id",`${t.number}_task`),c.classList.add("taskButtons");let o=document.createElement("button");o.innerText="Delete",o.addEventListener("click",(()=>{let n=document.getElementById(`${t.number}_task`).parentElement,r=n.lastChild.id.replace("_task,");n.remove(),e.splice(r,1),E()}));let s=document.createElement("button");return s.innerHTML="Edit",s.addEventListener("click",(()=>{let i=document.getElementById(`${t.number}_task`).parentElement,l=i.getElementsByTagName("p");r.insertBefore(u(l[0].innerText,l[1].innerText,l[2].innerText),n),n.innerText="Edit Task";let a=i.lastChild.id.replace("_task,");e.splice(a,1),E(),i.remove()})),c.appendChild(o),c.appendChild(s),i.appendChild(l),i.appendChild(a),i.appendChild(d),i.appendChild(c),i}function u(e,t,n){let r=document.createElement("div");r.setAttribute("id","inputs");let i=document.createElement("input");i.setAttribute("id","title"),i.value=e;let a=document.createElement("input");a.setAttribute("id","dueDate"),a.setAttribute("type","date"),a.value=t;let d=document.createElement("input");return d.setAttribute("id","descriptionBar"),d.value=n,r.appendChild(i),r.appendChild(a),r.appendChild(d),l=!0,c=!0,r}n.addEventListener("click",(()=>{if(1==l){a++;let o=(t=document.getElementById("title").value,i=document.getElementById("dueDate").value,c=document.getElementById("descriptionBar").value,function(t,n,r,i,l){let a=((e,t,n,r,i)=>({title:e,date:t,description:n,number:r,project:i}))(t,n,r,i,l);return e.push(a),a}(t,i,c,a,d));E(),document.getElementById("inputs").remove(),r.insertBefore(s(o),n),l=!1,n.innerText="Create Task"}else{let e=document.createElement("div");e.setAttribute("id","inputs");let t=document.createElement("input");t.setAttribute("id","title"),t.placeholder="Name";let i=document.createElement("input");i.setAttribute("id","dueDate"),i.setAttribute("type","date");let a=document.createElement("input");a.setAttribute("id","descriptionBar"),a.placeholder="Description",e.appendChild(t),e.appendChild(i),e.appendChild(a),r.insertBefore(e,n),l=!0,n.innerText="Add Task"}var t,i,c}));let p=document.getElementById("addProjectButton"),m=document.querySelector(".listProjects");function y(t){return e.filter((e=>e.project==t))}function T(e){document.querySelectorAll(".task").forEach((e=>e.remove())),e.forEach((e=>r.insertBefore(s(e),n)))}function E(){window.localStorage.setItem("taksArray",JSON.stringify(e)),window.localStorage.setItem("projectArray",JSON.stringify(o))}document.querySelectorAll(".task"),p.addEventListener("click",(()=>{i.innerText="",document.querySelectorAll(".task").forEach((e=>e.remove()));let t=document.createElement("input");t.placeholder="Project_Name",i.appendChild(t);let r=document.createElement("button");r.innerText="Add Project",i.appendChild(r),n.style.display="none",r.addEventListener("click",(()=>{if(""!=t.value){i.innerText=t.value;let r=document.createElement("p");r.innerText=i.innerText,d=r.innerText;let l=document.createElement("p");l.innerText="delete",l.addEventListener("click",(()=>{e=e.filter((e=>e.project!=r.innerText)),o=o.filter((e=>e!=r.innerText)),r.innerText==i.innerText&&(i.innerText="Switch to another project or create a new one",n.style.display="none",document.querySelectorAll(".task").forEach((e=>e.remove()))),r.remove(),l.remove(),E()})),r.addEventListener("click",(()=>{i.innerText=r.innerText,d=r.innerText,T(y(d)),n.style.display=""})),m.appendChild(r),m.appendChild(l),n.style.display="",o.push(t.value),E()}}))})),document.querySelector(".all").addEventListener("click",(()=>{i.innerText="All Tasks",T(e),n.style.display="none"})),document.querySelector(".today").addEventListener("click",(()=>{i.innerText="Tasks Due Today";let r=new Date;r=r.setDate(t.getDate());let l=JSON.parse(JSON.stringify(e));l=l.filter((e=>e.date=new Date(`${e.date}`)));let a=l.filter((e=>(e.date-r)/864e5<=1&&(e.date-r)/864e5>=-1));a=a.filter((e=>e.date=e.date.toLocaleDateString())),T(a),n.style.display="none"})),document.querySelector(".days7").addEventListener("click",(()=>{i.innerText="Tasks Due Within 7 days";let r=new Date;r=r.setDate(t.getDate());let l=JSON.parse(JSON.stringify(e));l=l.filter((e=>e.date=new Date(`${e.date}`)));let a=l.filter((e=>(e.date-r)/864e5<=8&&(e.date-r)/864e5>=-1));a=a.filter((e=>e.date=e.date.toLocaleDateString())),T(a),n.style.display="none"})),document.querySelector(".longterm").addEventListener("click",(()=>{i.innerText="Tasks not due in 7 days";let r=new Date;r=r.setDate(t.getDate());let l=JSON.parse(JSON.stringify(e));l=l.filter((e=>e.date=new Date(`${e.date}`)));let a=l.filter((e=>(e.date-r)/864e5>=8));a=a.filter((e=>e.date=e.date.toLocaleDateString())),T(a),n.style.display="none"})),e=JSON.parse(window.localStorage.getItem("taksArray")),o=JSON.parse(window.localStorage.getItem("projectArray")),o.forEach((t=>function(t){i.innerText=t;let r=document.createElement("p");r.innerText=i.innerText,d=r.innerText;let l=document.createElement("p");l.innerText="delete",l.addEventListener("click",(()=>{e=e.filter((e=>e.project!=r.innerText)),o=o.filter((e=>e!=r.innerText)),E(),r.innerText==i.innerText&&(i.innerText="Switch to another project or create a new one",n.style.display="none",document.querySelectorAll(".task").forEach((e=>e.remove()))),r.remove(),l.remove()})),r.addEventListener("click",(()=>{i.innerText=r.innerText,d=r.innerText,T(y(d)),n.style.display=""})),m.appendChild(r),m.appendChild(l),n.style.display=""}(t))),i.innerText="Add a Project",n.style.display="none"})();