(()=>{"use strict";let e=[];let t=[];var n=new Date;let l=document.getElementById("addTaskButton");l.style.display="none";let r=document.querySelector(".taskBoard"),i=document.querySelector(".taskBoardTitle"),a=!1,d=0,c=i.innerText,o=!1;function s(t){let n=document.createElement("div");n.setAttribute("class","task");let i=document.createElement("p");i.setAttribute("class","taskTitleDOM"),i.innerText=t.title;let a=document.createElement("p");a.setAttribute("class","taskDueDateDOM"),a.innerText=t.date;let d=document.createElement("p");d.setAttribute("class","desCriptionDOM"),d.innerText=t.description;let c=document.createElement("div");c.setAttribute("id",`${t.number}_task`),c.classList.add("taskButtons");let o=document.createElement("button");o.innerText="Delete",o.addEventListener("click",(()=>{let n=document.getElementById(`${t.number}_task`).parentElement,l=n.lastChild.id.replace("_task,");n.remove(),e.splice(l,1),E()}));let s=document.createElement("button");return s.innerHTML="Edit",s.addEventListener("click",(()=>{let n=document.getElementById(`${t.number}_task`).parentElement,i=n.getElementsByTagName("p");r.insertBefore(u(i[0].innerText,i[1].innerText,i[2].innerText),l),l.innerText="Edit Task";let a=n.lastChild.id.replace("_task,");e.splice(a,1),E(),n.remove()})),c.appendChild(o),c.appendChild(s),n.appendChild(i),n.appendChild(a),n.appendChild(d),n.appendChild(c),n}function u(e,t,n){let l=document.createElement("div");l.setAttribute("id","inputs");let r=document.createElement("input");r.setAttribute("id","title"),r.value=e;let i=document.createElement("input");i.setAttribute("id","dueDate"),i.setAttribute("type","date"),i.value=t;let d=document.createElement("input");return d.setAttribute("id","descriptionBar"),d.value=n,l.appendChild(r),l.appendChild(i),l.appendChild(d),a=!0,o=!0,l}l.addEventListener("click",(()=>{if(1==a){d++;let o=(t=document.getElementById("title").value,n=document.getElementById("dueDate").value,i=document.getElementById("descriptionBar").value,function(t,n,l,r,i){let a=((e,t,n,l,r)=>({title:e,date:t,description:n,number:l,project:r}))(t,n,l,r,i);return e.push(a),a}(t,n,i,d,c));null!=e&&E(),document.getElementById("inputs").remove(),r.insertBefore(s(o),l),a=!1,l.innerText="Create Task"}else{let e=document.createElement("div");e.setAttribute("id","inputs");let t=document.createElement("input");t.setAttribute("id","title"),t.placeholder="Name";let n=document.createElement("input");n.setAttribute("id","dueDate"),n.setAttribute("type","date");let i=document.createElement("input");i.setAttribute("id","descriptionBar"),i.placeholder="Description",e.appendChild(t),e.appendChild(n),e.appendChild(i),r.insertBefore(e,l),a=!0,l.innerText="Add Task"}var t,n,i}));let p=document.getElementById("addProjectButton"),m=document.querySelector(".listProjects");function y(t){return null!=e&&e.filter((e=>e.project==t)),tasks}function T(e){let t=document.querySelectorAll(".task");null!=t&&t.forEach((e=>e.remove())),null!=e&&e.forEach((e=>r.insertBefore(s(e),l)))}function E(){window.localStorage.setItem("taksArray",JSON.stringify(e)),window.localStorage.setItem("projectArray",JSON.stringify(t))}document.querySelectorAll(".task"),p.addEventListener("click",(()=>{i.innerText="";let n=document.querySelectorAll(".task");null!=n&&n.forEach((e=>e.remove()));let r=document.createElement("input");r.placeholder="Project_Name",i.appendChild(r);let a=document.createElement("button");a.innerText="Add Project",i.appendChild(a),l.style.display="none",a.addEventListener("click",(()=>{if(""!=r.value){i.innerText=r.value;let n=document.createElement("p");n.innerText=i.innerText,c=n.innerText;let a=document.createElement("p");a.innerText="delete",a.addEventListener("click",(()=>{if(null!=e&&null!=t&&(e=e.filter((e=>e.project!=n.innerText)),t=t.filter((e=>e!=n.innerText))),n.innerText==i.innerText){i.innerText="Switch to another project or create a new one",l.style.display="none";let e=document.querySelectorAll(".task");null!=e&&e.forEach((e=>e.remove()))}n.remove(),a.remove(),E()})),n.addEventListener("click",(()=>{i.innerText=n.innerText,c=n.innerText,T(y(c)),l.style.display=""})),m.appendChild(n),m.appendChild(a),l.style.display="",t.push(r.value),E()}}))})),document.querySelector(".all").addEventListener("click",(()=>{i.innerText="All Tasks",T(e),l.style.display="none"})),document.querySelector(".today").addEventListener("click",(()=>{i.innerText="Tasks Due Today";let t=new Date;t=t.setDate(n.getDate());let r=JSON.parse(JSON.stringify(e));if(null!=r){r=r.filter((e=>e.date=new Date(`${e.date}`)));let e=r.filter((e=>(e.date-t)/864e5<=1&&(e.date-t)/864e5>=-1));e=e.filter((e=>e.date=e.date.toLocaleDateString())),T(e)}l.style.display="none"})),document.querySelector(".days7").addEventListener("click",(()=>{i.innerText="Tasks Due Within 7 days";let t=new Date;t=t.setDate(n.getDate());let r=JSON.parse(JSON.stringify(e));if(null!=r){r=r.filter((e=>e.date=new Date(`${e.date}`)));let e=r.filter((e=>(e.date-t)/864e5<=8&&(e.date-t)/864e5>=-1));e=e.filter((e=>e.date=e.date.toLocaleDateString())),T(e)}l.style.display="none"})),document.querySelector(".longterm").addEventListener("click",(()=>{i.innerText="Tasks not due in 7 days";let t=new Date;t=t.setDate(n.getDate());let r=JSON.parse(JSON.stringify(e));if(null!=r){r=r.filter((e=>e.date=new Date(`${e.date}`)));let e=r.filter((e=>(e.date-t)/864e5>=8));e=e.filter((e=>e.date=e.date.toLocaleDateString())),T(e)}l.style.display="none"})),e=JSON.parse(window.localStorage.getItem("taksArray")),t=JSON.parse(window.localStorage.getItem("projectArray")),null!=t&&t.forEach((n=>function(n){i.innerText=n;let r=document.createElement("p");r.innerText=i.innerText,c=r.innerText;let a=document.createElement("p");a.innerText="delete",a.addEventListener("click",(()=>{if(null!=e&&null!=t&&(e=e.filter((e=>e.project!=r.innerText)),t=t.filter((e=>e!=r.innerText)),E()),r.innerText==i.innerText){i.innerText="Switch to another project or create a new one",l.style.display="none";let e=document.querySelectorAll(".task");null!=e&&e.forEach((e=>e.remove()))}r.remove(),a.remove()})),r.addEventListener("click",(()=>{i.innerText=r.innerText,c=r.innerText,T(y(c)),l.style.display=""})),m.appendChild(r),m.appendChild(a),l.style.display=""}(n))),i.innerText="Add a Project",l.style.display="none"})();